<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
</head>

<div style="margin: 5px">
	<h2>Eventliste</h2>
	<p>
	  Hier soll eine Liste der Events hin mit:
	</p>
	<ul>
		<li>Name</li>
		<li>Datum</li>
		<li>Ort</li>
		<li>Anmeldungen/Teilnehmer</li>
	</ul>
</div>

<div style="margin: 5px">
	<!-- p-table von PrimeNG -->
	<p-table #dt [columns]="cols" [value]="events" [paginator]="true" [rows]="2" [autoLayout]=true>
	    <!-- Suchfeld -->
	    <ng-template pTemplate="caption">
	        <div style="text-align: right">        
	            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
	            <input type="text" pInputText size="25" placeholder="Globaler Filter" (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
	        </div>
	    </ng-template>
	    
	    <ng-template pTemplate="header" let-columns>
	        <tr>
	        	<!-- Kopfzeile mit Beschriftung der Spalten -->
	            <th *ngFor="let col of columns">
	                {{col.header}}
	            </th>
	        </tr>
	        <tr>
	        	<!-- Suchfelder der Spalten -->
	            <th *ngFor="let col of columns" [ngSwitch]="col.field">
	                <input *ngSwitchCase="'id'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">
	                <input *ngSwitchCase="'ename'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains')">
	                <input *ngSwitchCase="'edatum'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">
	                <input *ngSwitchCase="'eort'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains')">
	                <div *ngSwitchCase="'eanz'">
	                    x > {{anzFilter}}
	                    <i class="fa fa-close" (click)="yearFilter=null;dt.filter(null, col.field, col.filterMatchMode)" style="cursor:pointer" *ngIf="anzFilter"></i>
	                    <p-slider [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="anzFilter" [min]="0" [max]="20" (onChange)="onAnzChange($event, dt)"></p-slider>
	                </div>
	                <div *ngSwitchCase="'besucher'">
	                    x > {{besucherFilter}}
	                    <i class="fa fa-close" (click)="yearFilter=null;dt.filter(null, col.field, col.filterMatchMode)" style="cursor:pointer" *ngIf="besucherFilter"></i>
	                    <p-slider [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="besucherFilter" [min]="0" [max]="20" (onChange)="onBesucherChange($event, dt)"></p-slider>
	                </div>
	            </th>
	        </tr>
	    </ng-template>
	    <!-- der eigentliche Inhalt der Tabelle --> 
	    <ng-template pTemplate="body" let-rowData let-columns="columns">
	        <tr [pSelectableRow]="rowData">
	            <td *ngFor="let col of columns" [ngSwitch]="col.field">
	            	<div *ngSwitchCase="'id'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" align='center'>{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'ename'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'edatum'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'eort'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'eanz'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" align='center'>{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'besucher'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" align='center'>{{rowData[col.field]}}</div>
	                <div *ngSwitchCase="'admin'" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">{{rowData[col.field]}}
	                	<a routerLink="/editevent/{{rowData['id']}}">
	            			<button pButton type="button" icon="pi pi-pencil" class="ui-button-warning"></button>  
		            	</a>  
		            	<a routerLink="/eventliste" routerLinkActive="active">        
		            		<button pButton type="button" icon="pi pi-times" class="ui-button-danger" title="deleteperson" (click)="delete(rowData['id'])"></button>
	                	</a>
	                </div>
	            </td>
	        </tr>
	    </ng-template>
	</p-table>
	
</div>